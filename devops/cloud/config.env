#!/bin/bash
# ==============================================================================
# Cloud Deployment Configuration for Palatte
# ==============================================================================
# This file contains shared configuration for all cloud deployment scripts.
# Currently configured for: Google Cloud Platform (GCP)
#
# Source this file in other scripts: source "$(dirname "$0")/config.env"
# ==============================================================================

# ------------------------------------------------------------------------------
# GCP Project Settings
# ------------------------------------------------------------------------------
export PROJECT_ID="meal-planner-482913"
export REGION="asia-southeast1"

# ------------------------------------------------------------------------------
# Service Names
# ------------------------------------------------------------------------------
export SERVICE_NAME="palatte"
export REPO_NAME="palatte-repo"

# ------------------------------------------------------------------------------
# Service Accounts
# Naming convention: <tier>-<purpose>
# ------------------------------------------------------------------------------
export SA_DEPLOYER="deployer-github-actions"
export SA_RUNTIME="runtime-palatte"

# ------------------------------------------------------------------------------
# Docker Settings
# ------------------------------------------------------------------------------
export DOCKERFILE_PATH="devops/docker/Dockerfile.dash-app"
export CONTAINER_PORT="8060"

# ------------------------------------------------------------------------------
# Cloud Run Settings
# ------------------------------------------------------------------------------
export MAX_INSTANCES="2"  # Cost cap for indie project

# ------------------------------------------------------------------------------
# Derived Values (do not edit)
# ------------------------------------------------------------------------------
export IMAGE_REPO="${REGION}-docker.pkg.dev/${PROJECT_ID}/${REPO_NAME}"
export IMAGE_NAME="${IMAGE_REPO}/${SERVICE_NAME}"
export SA_DEPLOYER_EMAIL="${SA_DEPLOYER}@${PROJECT_ID}.iam.gserviceaccount.com"
export SA_RUNTIME_EMAIL="${SA_RUNTIME}@${PROJECT_ID}.iam.gserviceaccount.com"
